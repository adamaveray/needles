/*! Needles 0.1.1 | adamaveray.github.io/needles | Â© 2014 Adam Averay | MIT */
!function(t,e){function s(t,e){return{__needles__:e,service:t}}function i(t){return t.service}function n(t,e){return t.__needles__===e}function r(t){return"function"==typeof t}var o=t.Needles=function(t){return this instanceof o?(this._values={},this._services={},this._factories={},this._extensions={},t&&this.set(t),e):new o(t)},c=o.prototype
c.get=function(t){var s,i,n
if(this._values[t]===e){if(this._services[t]===e)throw Error('Unknown dependency "'+t+'"')
if(s=this._services[t](this,t),i=this._extensions[t],i!==e)for(n=0;n<i.length;n++)s=i[n](s,this,t)
if(this._factories[t])return s
this._values[t]=s}return this._values[t]},c.set=function(t,e){if("object"==typeof t)for(var s in t)t.hasOwnProperty(s)&&this.set(s,t[s])
else r(e)?this._services[t]=e:n(e,"factory")?(this._services[t]=i(e),this._factories[t]=!0):(n(e,"protected")&&(e=i(e)),this._values[t]=e)
return this},c.extend=function(t,s){if(!r(s))throw Error("Extension is not callable")
return this._extensions[t]===e&&(this._extensions[t]=[]),this._extensions[t].push(s),this},c.raw=function(t){return this._services[t]!==e?this._services[t]:this._values[t]},c.protect=function(t){return s(t,"protected")},c.factory=function(t){if(!r(t))throw Error("Service is not callable")
return s(t,"factory")}}(this);