/*! Needles 0.1 | adamaveray.github.id/needles | Â© 2014 Adam Averay | MIT */
(function(h,d){function e(a){return"function"===typeof a}var f=h.Needles=function(a){if(!(this instanceof f))return new f(a);this.b={};this.a={};this.e={};this.c={};a&&this.set(a)},c=f.prototype;c.get=function(a){if(this.b[a]===d){var b;if(this.a[a]===d)throw Error('Unknown dependency "'+a+'"');b=this.a[a](this,a);var g=this.c[a];if(g!==d)for(var c=0;c<g.length;c++)b=g[c](b,this,a);if(this.e[a])return b;this.b[a]=b}return this.b[a]};c.set=function(a,b){if("object"===typeof a)for(var c in a)a.hasOwnProperty(c)&&
this.set(c,a[c]);else e(b)?this.a[a]=b:"factory"===b.f?(this.a[a]=b.d,this.e[a]=!0):("protected"===b.f&&(b=b.d),this.b[a]=b);return this};c.extend=function(a,b){if(!e(b))throw Error("Extension is not callable");this.c[a]===d&&(this.c[a]=[]);this.c[a].push(b);return this};c.i=function(a){return this.a[a]!==d?this.a[a]:this.b[a]};c.h=function(a){return{__needles__:"protected",d:a}};c.g=function(a){if(!e(a))throw Error("Service is not callable");return{__needles__:"factory",d:a}}})(this);